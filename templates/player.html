<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Very Punny Friends</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/app.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <script src="https://cdn.socket.io/4.7.4/socket.io.min.js" integrity="sha384-Gr6Lu2Ajx28mzwyVR8CFkULdCU7kMlZ9UthllibdOSo6qAiN+yXNHqtgdTvFXMT4" crossorigin="anonymous"></script>
    <script defer src="{{ url_for('static', filename='js/alpinejs/cdn.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/alpine.js') }}"></script>
</head>

<body>
    <div x-data="gameState">
        <!-- Loading -->
        <div x-show="currentScreen == 'loading'" class="gameScene bg-white z-50">
            <div class="flex flex-col gap-8 m-auto">
                <div class="m-auto">
                    <h1 class="m-auto text-3xl text-center">Loading...</h1>
                </div>
            </div>
        </div>
        <!-- !!Loading!! -->
        <!-- Home Screen -->
        <div x-show="currentScreen == 'title'" class="gameScene">
            <div class="flex flex-col gap-8 m-auto">
                <div class="m-auto">
                    <h1 class="m-auto text-3xl text-center">Very Punny Friends</h1>
                </div>
                <div class="m-auto">
                    <button class="w-32 py-2 bg-indigo-800 text-white rounded" x-on:click="currentScreen = 'new-player'">Join</button>
                </div>
            </div>
        </div>
        <!-- !!Home Screen!! -->
        <!-- New Player Screen -->
        <div x-show="currentScreen == 'new-player'" class="gameScene">
            <div class="flex flex-col gap-8 m-auto">
                <div class="m-auto">
                    <h1 class="m-auto text-2xl sm:text-3xl text-center">Enter Your Name, New Friend!</h1>
                </div>
                <div class="m-auto flex flex-row gap-2 w-11/12 max-w-screen-sm">
                    <input x-on:keyup.enter="$refs.buttonNameSubmit.click()" x-model="playerEnteredName" type="text" class="p-2 rounded outline-none border-2 border-gray-600 focus:border-indigo-800 w-3/4">
                    <button x-ref="buttonNameSubmit" x-on:click="createAndJoinLobby()" x-bind:disabled="playerEnteredName == null || playerEnteredName.length <= 3" class="w-1/4 bg-indigo-800 text-white rounded disabled:opacity-25 grid">
                        <span class="material-symbols-outlined m-auto">arrow_forward</span>
                    </button>
                </div>
            </div>
        </div>
        <!-- !!New Player Screen!! -->
        <!-- Lobby -->
        <div x-show="currentScreen == 'lobby'" class="gameScene">
            <div class="flex flex-col overflow-hidden w-11/12 max-w-screen-lg h-[90vh] m-auto relative">
                <div class="grid m-auto max-w-screen-sm">
                    <p class="text-center m-auto">Thanks for coming, my punny friend!<br>Let's wait for even more friends!</p>
                </div>
            </div>
        </div>
        <!-- !!Lobby!! -->
        <!-- Game Screen -->
        <div x-show="currentScreen == 'game-screen'" class="gameScene">
            <div class="flex flex-col overflow-hidden w-11/12 max-w-screen-lg h-[90vh] m-auto relative">
                <div x-show="gameState.level_countdown > 0" class="flex flex-col m-auto text-center">
                    Here is comes!
                </div>
                <div x-show="gameState.level_countdown <= 0 && gameState.accepting_answers" class="m-auto flex flex-col gap-2">
                    <h3 class="w-full text-lg text-center" x-text="gameState.current_word"></h3>
                    <div class="m-auto flex flex-row gap-2 w-11/12 max-w-screen-sm">
                        <input x-on:keyup.enter="$refs.buttonJokeSubmit.click()" x-model="jokeSubmission" type="text" class="p-2 rounded outline-none border-2 border-gray-600 focus:border-indigo-800 w-3/4">
                        <button x-ref="buttonJokeSubmit" x-on:click="submitJoke()" x-bind:disabled="jokeSubmission == null || jokeSubmission.length <= 3" class="w-1/4 bg-indigo-800 text-white rounded disabled:opacity-25 grid">
                            <span class="material-symbols-outlined m-auto">arrow_forward</span>
                        </button>
                    </div>
                </div>
                <span class="absolute bottom-0 left-0" x-text="`${playerData.name}`"></span>
                <span class="absolute bottom-0 right-0" x-text="`Score: ${playerData.score}`"></span>
            </div>
        </div>
        <!-- !!Game Screen!! -->
    </div>
</body>
</html>